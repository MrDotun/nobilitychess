<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Adekunle's Chess Corner</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        body { 
            background-color: #0f172a; font-family: 'Inter', sans-serif; 
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0; color: white;
        }
        #chess-game-zone { 
            max-width: 450px; width: 95%; text-align: center; 
            border: 4px solid #f59e0b; padding: 20px; border-radius: 24px; 
            background-color: #1e293b; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); 
        }
        .stats-bar { 
            display: flex; justify-content: space-around; margin-bottom: 15px; 
            background: #334155; padding: 12px; border-radius: 12px; 
            border: 1px solid #f59e0b; color: #fbbf24; font-weight: bold;
        }
        #board { width: 100%; margin: 10px auto; border: 4px solid #475569; border-radius: 4px; overflow: hidden; }
        #puzzle-title { color: #fbbf24; margin: 10px 0; font-size: 1.3em; font-weight: 800; }
        #feedback { min-height: 1.5em; margin-bottom: 10px; font-size: 0.9em; font-weight: 500; }
        
        .highlight-selected { background-color: rgba(56, 189, 248, 0.6) !important; }
        .highlight-last-move { background-color: rgba(251, 191, 36, 0.5) !important; }

        .action-btns { margin-top: 15px; display: flex; flex-direction: column; gap: 10px; }
        button { 
            cursor: pointer; border: none; font-weight: bold; border-radius: 12px; 
            transition: all 0.2s; padding: 14px; text-transform: uppercase;
        }
        #hint-btn { background-color: #f59e0b; color: #1e293b; }
        .nav-btns { display: flex; gap: 10px; }
        .nav-btn { background: #475569; color: white; flex: 1; }
        .coach-footer { font-size: 0.8em; color: #64748b; margin-top: 20px; border-top: 1px solid #334155; padding-top: 10px; }
    </style>
</head>
<body>

<div id="chess-game-zone">
    <div class="stats-bar">
        <div>‚≠ê <span id="score-val">0</span></div>
        <div>üèÜ <span id="level-val">Expert</span></div>
    </div>
    <h2 id="puzzle-title">Loading...</h2>
    <div id="feedback">Analyze carefully...</div>
    <div id="board"></div>
    <div class="action-btns">
        <button id="hint-btn" onclick="showHint()">üí° HINT</button>
        <div class="nav-btns">
            <button class="nav-btn" onclick="prevPuzzle()">‚¨ÖÔ∏è</button>
            <button class="nav-btn" onclick="nextPuzzle()">SKIP ‚û°Ô∏è</button>
        </div>
    </div>
    <div class="coach-footer">Curated by <b>Coach Adekunle Busayo</b></div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>

<script>
    const puzzles = [
        // FIXED ORIGINALS
        { title: "Back Rank Mate", fen: "6k1/5ppp/8/8/8/8/8/3R2K1 w - - 0 1", hint: "The King is trapped behind his own pawns.", move: "d1d8" },
        { title: "The Knight Fork", fen: "rn2k2r/pp3ppp/4q3/1N1p4/8/5N2/PP3PPP/R1BQK2R w KQkq - 0 1", hint: "Jump to c7 to fork the King and Queen.", move: "b5c7" },
        { title: "Rook Skewer", fen: "8/8/8/R3k2q/8/8/8/1K6 w - - 0 1", hint: "Attack the King on e5; the Queen is behind him on h5.", move: "a5e5" },
        { title: "Anastasia's Mate", fen: "r4rk1/pp2Nppp/8/1R6/8/8/PPP2PPP/5RK1 w - - 0 1", hint: "Force the King to h8.", move: "e7g6" },
        
        // 10 NEW PUZZLES
        { title: "The Absolute Pin", fen: "4r1k1/5ppp/q7/4R3/8/8/5PPP/4R1K1 w - - 0 1", hint: "Black's Rook is pinned to the King by your back-rank pressure.", move: "e5e8" },
        { title: "Boden's Mate", fen: "2kr4/pbpp4/1p6/8/2B5/8/PPPB4/2K5 w - - 0 1", hint: "The two bishops criss-cross for the kill.", move: "c4a6" },
        { title: "Queenside Deflection", fen: "6k1/5ppp/8/8/q7/2R5/1R6/1K6 w - - 0 1", hint: "Distract the Queen to win the back rank.", move: "c3c8" },
        { title: "The Discovered Attack", fen: "r1bqk2r/pppp1ppp/2n2n2/4p3/1bB1P3/2N2N2/PPPP1PPP/R1BQK2R w KQkq - 0 1", hint: "White to play: move the Knight to attack the Queen.", move: "c3d5" },
        { title: "Philidor's Legacy", fen: "6rk/5Npp/8/8/8/8/8/7K w - - 0 1", hint: "The classic Smothered Mate pattern.", move: "f7h6" },
        { title: "The X-Ray Attack", fen: "4r1k1/5ppp/8/8/8/8/5PPP/R3R1K1 w - - 0 1", hint: "Your Rook looks through theirs to the King.", move: "e1e8" },
        { title: "Legal's Trap Pattern", fen: "rn1qkbnr/ppp2ppp/3p4/4N3/2B1P3/8/PPPP1PPP/RNBQK2R w KQkq - 0 1", hint: "Black ignored the development. Strike on f7.", move: "c4f7" },
        { title: "Greco's Mate", fen: "5rk1/5ppp/8/2B5/8/8/8/1R4K1 w - - 0 1", hint: "A Bishop and Rook coordination.", move: "c5f8" },
        { title: "Opera House Mate", fen: "4k3/8/8/8/8/8/2B2Q2/4K3 w - - 0 1", hint: "Checkmate on the open file.", move: "f2e2" },
        { title: "Damiano's Bishop", fen: "1k6/ppp5/8/8/8/8/5Q2/1K6 w - - 0 1", hint: "The Queen delivers the blow supported by a pawn or bishop.", move: "f2f8" },
        
        // MORE CLASSICS
        { title: "Ladder Mate", fen: "7k/R7/1R6/8/8/8/8/7K w - - 0 1", hint: "Use the Rooks to roll the King to the edge.", move: "b6b8" },
        { title: "Smothered Mate", fen: "6rk/6pp/7N/8/8/8/8/7K w - - 0 1", hint: "The King is trapped by his own pieces.", move: "h6f7" },
        { title: "Scholar's Mate", fen: "r1bqkb1r/pppp1ppp/2n2n2/4p2Q/2B1P3/8/PPPP1PPP/RNB1K1NR w KQkq - 4 4", hint: "Mate on f7.", move: "h5f7" }
    ];

    let currentIdx = 0;
    let stars = 0;
    let board = null;
    let game = new Chess();
    let sourceSquare = null;

    function updateFeedback(msg, isError = false) {
        const f = document.getElementById('feedback');
        f.innerText = msg;
        f.style.color = isError ? "#f87171" : "#94a3b8";
    }

    function removeHighlights() {
        $('#board .square-55d63').removeClass('highlight-selected highlight-last-move');
    }

    function onSquareClick() {
        const square = $(this).attr('data-square');
        const piece = game.get(square);

        if (sourceSquare === null) {
            if (piece && piece.color === game.turn()) {
                sourceSquare = square;
                removeHighlights();
                $(this).addClass('highlight-selected');
            }
            return;
        }

        if (sourceSquare === square) {
            sourceSquare = null;
            removeHighlights();
            return;
        }

        if (piece && piece.color === game.turn()) {
            sourceSquare = square;
            removeHighlights();
            $(this).addClass('highlight-selected');
            return;
        }

        const move = game.move({ from: sourceSquare, to: square, promotion: 'q' });

        if (move === null) {
            updateFeedback("Illegal move! Try again.", true);
            sourceSquare = null;
            removeHighlights();
        } else {
            if ((move.from + move.to) === puzzles[currentIdx].move) {
                stars++;
                document.getElementById('score-val').innerText = stars;
                board.position(game.fen());
                removeHighlights();
                $(`.square-${move.from}, .square-${move.to}`).addClass('highlight-last-move');
                updateFeedback("üèÜ BRILLIANT!");
                setTimeout(nextPuzzle, 1200);
            } else {
                updateFeedback("‚ùå Incorrect tactic. Try again!", true);
                setTimeout(updateBoard, 600);
            }
            sourceSquare = null;
        }
    }

    function updateBoard() {
        const p = puzzles[currentIdx];
        document.getElementById('puzzle-title').innerText = p.title;
        game.load(p.fen);
        board.position(p.fen);
        sourceSquare = null;
        removeHighlights();
        updateFeedback("Find the best move!");
    }

    function showHint() { updateFeedback("üí° " + puzzles[currentIdx].hint); }
    function nextPuzzle() { currentIdx = (currentIdx + 1) % puzzles.length; updateBoard(); }
    function prevPuzzle() { currentIdx = (currentIdx - 1 + puzzles.length) % puzzles.length; updateBoard(); }

    board = Chessboard('board', {
        draggable: false,
        position: 'start',
        pieceTheme: 'https://chessboardjs.com/img/chesspieces/wikipedia/{piece}.png'
    });

    $(document).on('click', '.square-55d63', onSquareClick);
    $(window).resize(board.resize);
    updateBoard();
</script>
</body>
</html>
