<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>50 Chess Puzzles for Kids</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>

    <style>
        :root { --wine: #722f37; --navy: #000080; --yellow: #f1c40f; }
        body { background-color: var(--navy); color: white; font-family: 'Arial', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .back-link { color: var(--yellow); text-decoration: none; font-weight: bold; border: 2px solid var(--yellow); padding: 10px 20px; border-radius: 8px; margin-bottom: 20px; transition: 0.3s; }
        .back-link:hover { background: var(--yellow); color: var(--navy); }
        #puzzle-card { background: var(--wine); padding: 20px; border-radius: 15px; border: 4px solid var(--yellow); width: 100%; max-width: 400px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        .header { display: flex; justify-content: space-between; font-weight: bold; color: var(--yellow); margin-bottom: 10px; }
        #board { width: 100%; margin: 10px 0; border: 2px solid #fff; }
        .instruction { text-align: center; min-height: 40px; margin: 10px 0; font-style: italic; }
        .controls { display: flex; gap: 10px; margin-top: 10px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        #next-btn { background: var(--yellow); color: var(--navy); }
        #next-btn:disabled { background: #666; cursor: not-allowed; }
        .retry-btn { background: #fff; color: var(--wine); }
    </style>
</head>
<body>

<a href="index.html" class="back-link">‚Üê Back to Academy</a>

<div id="puzzle-card">
    <div class="header">
        <span>Score: <span id="score">0</span>/50</span>
        <span>Puzzle <span id="current-num">1</span></span>
    </div>
    <div class="instruction" id="msg">Loading puzzle...</div>
    <div id="board"></div>
    <div class="controls">
        <button class="retry-btn" onclick="resetCurrent()">Reset</button>
        <button id="next-btn" onclick="nextPuzzle()" disabled>Next Puzzle</button>
    </div>
</div>

<script>
// 50 UNIQUE FEN POSITIONS
const puzzles = [
    {f: '4k3/4r3/8/8/8/8/4R3/4K3 w - - 0 1', m: 'xe7', t: 'Trade the Rooks!'},
    {f: 'R5k1/5ppp/8/8/8/8/8/4K3 w - - 0 1', m: 'a8', t: 'Back Rank Checkmate!'},
    {f: '6k1/5ppp/8/8/8/8/6PP/R5K1 w - - 0 1', m: 'a8', t: 'Find the hallway mate!'},
    {f: 'k7/8/1K6/8/8/8/8/R7 w - - 0 1', m: 'a7', t: 'Corner the King!'},
    {f: '7k/5Q2/6K1/8/8/8/8/8 w - - 0 1', m: 'g7', t: 'The Queen Kiss mate!'},
    {f: '4k3/R7/4K3/8/8/8/8/8 w - - 0 1', m: 'a8', t: 'Drive him to the edge!'},
    {f: 'r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5Q2/PPPP1PPP/RNB1K1NR w KQkq - 0 1', m: 'xf7', t: "Scholar's Mate!"},
    {f: '6k1/3R4/5K2/8/8/8/8/8 w - - 0 1', m: 'd8', t: 'Last row victory!'},
    {f: '1k6/8/2K5/Q7/8/8/8/8 w - - 0 1', m: 'c7', t: 'Queen delivery!'},
    {f: '2k5/8/2K5/8/8/8/8/R7 w - - 0 1', m: 'a8', t: 'The Elevator Checkmate!'},
    {f: 'rnbqkbnr/pppp1ppp/8/4p3/5PP1/8/PPPPP2P/RNBQKBNR b KQkq - 0 1', m: 'h4', t: "Black wins in 1 move!"},
    {f: '4k3/Q7/4K3/8/8/8/8/8 w - - 0 1', m: 'e7', t: 'Checkmate the King!'},
    {f: '8/8/8/8/8/2k5/1p6/1K6 b - - 0 1', m: 'b1', t: 'Turn your pawn into a Queen!'},
    {f: '3k4/3P4/3K4/8/8/8/8/8 w - - 0 1', m: 'd7', t: 'Push to the end!'},
    {f: '6k1/8/6K1/8/8/8/7P/R7 w - - 0 1', m: 'a8', t: 'Rook to the rescue!'},
    {f: '1rb1kbnr/pppp1ppp/2n5/4p3/2B1P3/5Q2/PPPP1PPP/RNB1K1NR w KQkq - 0 1', m: 'xf7', t: 'Attack the f7 square!'},
    {f: '5k2/8/5K2/8/8/8/8/Q7 w - - 0 1', m: 'a8', t: 'Long distance checkmate!'},
    {f: '3k4/8/3K4/8/8/8/8/3R4 w - - 0 1', m: 'd8', t: 'Straight up the middle!'},
    {f: '8/k7/2K5/1Q6/8/8/8/8 w - - 0 1', m: 'b7', t: 'The Queen lands!'},
    {f: 'r4rk1/5ppp/8/8/8/8/5PPP/R4RK1 w - - 0 1', m: 'xa8', t: 'Capture the Rook!'},
    {f: 'q5k1/5ppp/8/8/8/8/5PPP/Q5K1 w - - 0 1', m: 'xa8', t: 'Trade Queens!'},
    {f: '8/8/8/8/8/k7/1p6/Q1K5 b - - 0 1', m: 'xa1', t: 'Take the big Queen!'},
    {f: '6k1/8/5KP1/8/8/8/8/8 w - - 0 1', m: 'g7', t: 'Pawn power!'},
    {f: '2k5/8/8/8/8/2N5/8/2K5 w - - 0 1', m: 'xd5', t: 'Knight jump!'},
    {f: '1k6/8/8/8/Q7/8/8/1K6 w - - 0 1', m: 'xb4', t: 'Take the free piece!'},
    {f: '4k3/4p3/8/8/8/8/4P3/4K3 w - - 0 1', m: 'xe7', t: 'Pawn grab!'},
    {f: '7k/8/7K/8/8/8/8/R7 w - - 0 1', m: 'a8', t: 'One move to win!'},
    {f: '8/2k5/2P5/2K5/8/8/8/8 w - - 0 1', m: 'c7', t: 'Pawn march!'},
    {f: '1k6/1p6/1K6/8/8/8/8/Q7 w - - 0 1', m: 'a8', t: 'Corner mate!'},
    {f: '8/k7/8/8/1N6/8/8/1K6 w - - 0 1', m: 'xc6', t: 'Knight attack!'},
    {f: 'k7/8/K7/1B6/8/8/8/8 w - - 0 1', m: 'c6', t: 'Bishop check!'},
    {f: '3k4/8/3K4/8/8/1B6/8/8 w - - 0 1', m: 'f7', t: 'Diagonal win!'},
    {f: '6k1/5ppp/8/8/8/8/1B4PP/6K1 w - - 0 1', m: 'xg7', t: 'Sniper Bishop!'},
    {f: 'k7/8/K7/8/8/8/6N1/8 w - - 0 1', m: 'f4', t: 'Knight move!'},
    {f: '3k4/8/Q2K4/8/8/8/8/8 w - - 0 1', m: 'a8', t: 'Top rank mate!'},
    {f: '8/8/k7/8/2Q5/8/8/1K6 w - - 0 1', m: 'xa6', t: 'Take the pawn!'},
    {f: '1k6/8/K7/8/8/8/8/R7 w - - 0 1', m: 'a7', t: 'Trap the King!'},
    {f: 'rnbqkbnr/1ppppppp/8/p7/P7/8/1PPPPPPP/RNBQKBNR w KQkq - 0 1', m: 'xa5', t: 'Edge pawn capture!'},
    {f: 'k7/1P6/K7/8/8/8/8/8 w - - 0 1', m: 'b8', t: 'Promote to win!'},
    {f: '2k5/2P5/2K5/8/8/8/8/8 w - - 0 1', m: 'c7', t: 'One more step!'},
    {f: '5k2/5P2/5K2/8/8/8/8/8 w - - 0 1', m: 'f7', t: 'Victory push!'},
    {f: 'k7/5R2/K7/8/8/8/8/8 w - - 0 1', m: 'f8', t: 'The final checkmate!'},
    {f: '8/8/8/k7/8/8/1R6/1K6 w - - 0 1', m: 'xb2', t: 'Rook capture!'},
    {f: '4k3/Q7/5K2/8/8/8/8/8 w - - 0 1', m: 'e7', t: 'Queen delivery!'},
    {f: '6k1/Q4ppp/8/8/8/8/5PPP/6K1 w - - 0 1', m: 'a8', t: 'Hallway checkmate!'},
    {f: '2r3k1/5ppp/8/8/8/8/2R3PP/6K1 b - - 0 1', m: 'xc2', t: 'Take their Rook!'},
    {f: '3k4/1Q6/3K4/8/8/8/8/8 w - - 0 1', m: 'e7', t: 'Queen kiss!'},
    {f: 'k7/P7/1K6/8/8/8/8/8 b - - 0 1', m: 'xb7', t: 'Eat the pawn!'},
    {f: 'r1bqkbnr/pppp1ppp/2n5/4N3/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1', m: 'xe5', t: 'Knight trade!'},
    {f: '8/8/5k2/5P2/5K2/8/8/8 w - - 0 1', m: 'f6', t: 'Pawn push!'}
];

let currentIdx = 0;
let score = 0;
let game = new Chess();
let board = null;
let sourceSquare = null;

function pieceTheme(piece) {
    return 'https://chessboardjs.com/img/chesspieces/wikipedia/' + piece + '.png';
}

function initPuzzle() {
    const p = puzzles[currentIdx];
    game.load(p.f);
    board.position(p.f);
    sourceSquare = null;
    $('.square-55d63').css('background', '');
    document.getElementById('msg').innerText = p.t;
    document.getElementById('msg').style.color = "white";
    document.getElementById('next-btn').disabled = true;
    document.getElementById('current-num').innerText = currentIdx + 1;
}

function onSquareClick(square) {
    if (!document.getElementById('next-btn').disabled && currentIdx < puzzles.length - 1) return;

    if (sourceSquare === null) {
        if (game.get(square)) {
            sourceSquare = square;
            $('.square-' + square).css('background', 'rgba(241, 196, 15, 0.7)');
        }
    } else {
        const move = game.move({ from: sourceSquare, to: square, promotion: 'q' });
        if (move) {
            const correct = puzzles[currentIdx].m;
            if (move.san.includes(correct) || move.to === correct) {
                document.getElementById('msg').innerText = "EXCELLENT! üåü";
                document.getElementById('msg').style.color = "#2ecc71";
                score++;
                document.getElementById('score').innerText = score;
                document.getElementById('next-btn').disabled = false;
            } else {
                document.getElementById('msg').innerText = "Try again! üß©";
                document.getElementById('msg').style.color = "var(--yellow)";
                setTimeout(initPuzzle, 1000);
            }
            board.position(game.fen());
        }
        sourceSquare = null;
        $('.square-55d63').not('.square-' + square).css('background', '');
    }
}

function nextPuzzle() {
    currentIdx++;
    if (currentIdx < puzzles.length) {
        initPuzzle();
    } else {
        document.getElementById('msg').innerText = "üèÜ MASTER! You finished all 50!";
        document.getElementById('next-btn').style.display = 'none';
    }
}

function resetCurrent() { initPuzzle(); }

board = Chessboard('board', {
    position: puzzles[0].f,
    pieceTheme: pieceTheme,
    draggable: false
});

$('#board').on('click', '.square-55d63', function() {
    onSquareClick($(this).data('square'));
});

initPuzzle();
</script>
</body>
</html>
