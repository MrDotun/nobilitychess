<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Adekunle's Chess Academy</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    
    <style>
        :root { --wine: #800000; --navy: #000080; --yellow: #FFD700; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f0f0f0; margin: 0; padding: 20px; }
        .header { background: var(--wine); color: var(--yellow); padding: 20px; border-radius: 10px; text-align: center; border-bottom: 5px solid var(--navy); margin-bottom: 20px; }
        .container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        #board { width: 450px; border: 10px solid var(--navy); border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .sidebar { width: 380px; background: var(--navy); padding: 20px; border-radius: 10px; color: white; }
        .stats-bar { display: flex; justify-content: space-between; font-size: 1.3em; font-weight: bold; color: var(--yellow); margin-bottom: 15px; }
        .category-tabs { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 15px; }
        .tab-btn { padding: 10px; cursor: pointer; border: 1px solid var(--yellow); background: var(--wine); color: white; border-radius: 5px; font-weight: bold; }
        .tab-btn:hover { background: #5a0000; }
        #puzzle-list { list-style: none; padding: 0; max-height: 250px; overflow-y: auto; background: white; color: #333; border-radius: 5px; }
        .puzzle-item { padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
        .active-puzzle { background: var(--yellow) !important; color: var(--navy); font-weight: bold; }
        .solved { color: #27ae60; text-decoration: line-through; }
        .coach-box { background: white; color: #333; padding: 15px; border-left: 6px solid var(--yellow); border-radius: 4px; margin-top: 15px; min-height: 50px; }
        
        /* Certificate Modal */
        #cert-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 550px; background: white; padding: 40px; border: 15px double var(--wine); text-align: center; z-index: 1000; box-shadow: 0 0 100px rgba(0,0,0,0.5); }
        .sig { margin-top: 30px; font-style: italic; border-top: 1px solid #333; display: inline-block; padding-top: 5px; color: var(--navy); font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <h1>üèÜ Coach Adekunle Busayo's Academy</h1>
    <p>Strategy ‚Ä¢ Discipline ‚Ä¢ Victory</p>
</div>

<div id="cert-modal">
    <p style="letter-spacing: 5px;">OFFICIAL DIPLOMA</p>
    <h2 style="color:var(--navy); font-size: 2em;">CHESS MASTER</h2>
    <p>This certifies that the student has conquered 500 points in tactical training.</p>
    <div class="sig">Tutor Adekunle Busayo</div><br>
    <button onclick="$('#cert-modal').fadeOut()" style="margin-top:20px; padding:10px; cursor:pointer;">Close</button>
</div>

<div class="container">
    <div>
        <div id="board"></div>
        <div class="coach-box" id="feedback">
            <strong>Tutor Adekunle:</strong> "Pick a category to begin our training session!"
        </div>
    </div>

    <div class="sidebar">
        <div class="stats-bar">
            <span>‚≠ê <span id="star-count">0</span></span>
            <span>‚è±Ô∏è <span id="timer">0.0</span>s</span>
        </div>
        
        <div class="category-tabs">
            <button class="tab-btn" onclick="filterPuzzles('Mate in 1')">Mate in 1</button>
            <button class="tab-btn" onclick="filterPuzzles('Pin')">The Pin</button>
            <button class="tab-btn" onclick="filterPuzzles('Fork')">The Fork</button>
            <button class="tab-btn" onclick="filterPuzzles('Back Rank')">Back Rank</button>
            <button class="tab-btn" onclick="filterPuzzles('Double Check')">Double Chk</button>
            <button class="tab-btn" onclick="filterPuzzles('Promotion')">Promotion</button>
        </div>

        <ul id="puzzle-list"></ul>
        <button onclick="resetPuzzle()" style="width:100%; margin-top:15px; padding:12px; background:var(--yellow); color:var(--navy); border:none; border-radius:5px; font-weight:bold; cursor:pointer;">RESET POSITION</button>
    </div>
</div>

<script>
const puzzles = [
    // MATE IN 1
    { id: 1, name: "Smothered Mate", category: "Mate in 1", fen: "6rk/5Npp/8/8/8/8/8/7K b - - 0 1", solution: "f7h6", hint: "The King is trapped!" },
    { id: 2, name: "Kiss of Death", category: "Mate in 1", fen: "r1bqkb1r/pppp1Qpp/2n2n2/4p3/2B1P3/8/PPPP1PPP/RNB1K1NR w KQkq - 0 1", solution: "f7f7", hint: "Queen takes pawn!" },
    { id: 3, name: "Opera Mate", category: "Mate in 1", fen: "4k3/8/4K3/8/8/8/8/4R3 w - - 0 1", solution: "e1e8", hint: "Back row checkmate." },
    { id: 4, name: "Helper Bishop", category: "Mate in 1", fen: "7k/R7/4B3/8/8/8/8/7K w - - 0 1", solution: "a7h7", hint: "Rook to H7." },
    { id: 5, name: "Corner Trap", category: "Mate in 1", fen: "7k/5Q2/8/8/8/8/8/7K w - - 0 1", solution: "f7g7", hint: "Queen to G7." },
    { id: 6, name: "Ladder Mate", category: "Mate in 1", fen: "k7/7R/1K6/8/8/8/8/8 w - - 0 1", solution: "h7h8", hint: "Top row!" },
    { id: 7, name: "Support Queen", category: "Mate in 1", fen: "6k1/5ppp/8/8/8/8/6QP/6K1 w - - 0 1", solution: "g2a8", hint: "A8 checkmate." },
    { id: 8, name: "Pawn Power", category: "Mate in 1", fen: "k7/1P6/2K5/8/8/8/8/8 w - - 0 1", solution: "b7b8", hint: "Push the pawn." },
    { id: 9, name: "The Battery", category: "Mate in 1", fen: "6k1/Q4ppp/8/8/8/8/1B6/6K1 w - - 0 1", solution: "a7a8", hint: "Queen to back rank." },
    { id: 10, name: "Sneaky Rook", category: "Mate in 1", fen: "1k6/R7/1K6/8/8/8/8/8 w - - 0 1", solution: "a7b7", hint: "B7 is the spot." },

    // PINS
    { id: 11, name: "The Skewer", category: "Pin", fen: "4k3/8/8/r7/8/8/8/4K2R w K - 0 1", solution: "h1h8", hint: "Check the King!" },
    { id: 12, name: "Frozen Queen", category: "Pin", fen: "q3k3/8/4R3/8/8/8/8/4K3 w - - 0 1", solution: "e6e8", hint: "Pin the Queen." },
    { id: 13, name: "Bishop Laser", category: "Pin", fen: "k7/8/1q6/8/3B4/8/8/K7 w - - 0 1", solution: "d4b6", hint: "Capture the Queen." },
    { id: 14, name: "Locked Knight", category: "Pin", fen: "3k4/8/3n4/8/3R4/8/8/3K4 w - - 0 1", solution: "d4d6", hint: "Knight can't move." },
    { id: 15, name: "Rook Glue", category: "Pin", fen: "k7/8/8/8/8/8/1q6/R3K3 w Q - 0 1", solution: "a1a2", hint: "Stick the Queen." },
    { id: 16, name: "Absolute Pin", category: "Pin", fen: "8/2k5/8/2r5/2B5/8/8/4K3 w - - 0 1", solution: "c4b3", hint: "Stay safe." },
    { id: 17, name: "Diagonal Pin", category: "Pin", fen: "k7/8/2q5/8/5B2/8/8/7K w - - 0 1", solution: "f4b8", hint: "Block it!" },
    { id: 18, name: "Heavy Rook", category: "Pin", fen: "3k4/8/3r4/8/3R4/8/8/3K4 w - - 0 1", solution: "d4d6", hint: "Trade Rooks." },
    { id: 19, name: "King Guard", category: "Pin", fen: "4k3/8/4b3/8/4R3/8/8/4K3 w - - 0 1", solution: "e4e6", hint: "Capture Bishop." },
    { id: 20, name: "Side Pin", category: "Pin", fen: "k7/8/8/r2B4/8/8/8/K7 w - - 0 1", solution: "d5a2", hint: "Move Bishop." },

    // FORKS
    { id: 21, name: "Royal Fork", category: "Fork", fen: "r3k2r/ppq2ppp/8/3n4/8/8/PP3PPP/R3K2R w KQkq - 0 1", solution: "d5c7", hint: "Knight jump!" },
    { id: 22, name: "Double Trouble", category: "Fork", fen: "4k3/8/8/2b1r3/4N3/8/8/4K3 w - - 0 1", solution: "e4f6", hint: "Knight check." },
    { id: 23, name: "Queen Fork", category: "Fork", fen: "k7/8/2q5/8/4N3/8/8/K7 w - - 0 1", solution: "e4c5", hint: "Attack both." },
    { id: 24, name: "Rook Fork", category: "Fork", fen: "8/3k4/8/3R4/1b3n2/8/8/3K4 w - - 0 1", solution: "d5b5", hint: "Attack pieces." },
    { id: 25, name: "Simple Fork", category: "Fork", fen: "k7/8/1q3n2/8/3N4/8/8/K7 w - - 0 1", solution: "d4c6", hint: "Move Knight." },
    { id: 26, name: "Triple Fork", category: "Fork", fen: "k7/8/8/3n4/8/2R1B3/8/K7 b - - 0 1", solution: "d5c3", hint: "Take Rook." },
    { id: 27, name: "King Queen Fork", category: "Fork", fen: "4k3/8/8/8/3n4/8/1Q6/4K3 b - - 0 1", solution: "d4f3", hint: "Fork King/Queen." },
    { id: 28, name: "Pawn Fork", category: "Fork", fen: "k7/8/8/3p1p2/4P3/8/8/K7 b - - 0 1", solution: "d5e4", hint: "Pawn move." },
    { id: 29, name: "Knight Leap", category: "Fork", fen: "4k3/8/1n6/8/8/4Q3/8/4K3 b - - 0 1", solution: "n6d5", hint: "Save the day." },
    { id: 30, name: "End Fork", category: "Fork", fen: "8/3k4/8/3n4/8/8/2R5/3K4 b - - 0 1", solution: "d5e3", hint: "Final Fork." },

    // BACK RANK
    { id: 31, name: "Back Rank Trap", category: "Back Rank", fen: "6k1/5ppp/8/8/8/8/5PPP/3R2K1 w - - 0 1", solution: "d1d8", hint: "Bottom row checkmate." },
    { id: 32, name: "The Corridor", category: "Back Rank", fen: "k7/ppp5/8/8/8/8/8/R5K1 w - - 0 1", solution: "a1a8", hint: "Trapped by pawns." },
    { id: 33, name: "Hidden Mate", category: "Back Rank", fen: "5rk1/1p3ppp/8/8/8/8/Q4PPP/6K1 w - - 0 1", solution: "a2a8", hint: "Queen dive." },
    { id: 34, name: "The Box", category: "Back Rank", fen: "k7/1p6/1K6/8/8/8/8/2R5 w - - 0 1", solution: "c1c8", hint: "Nowhere to go." },
    { id: 35, name: "Rook Lift", category: "Back Rank", fen: "2k5/ppp5/8/8/8/8/8/2R1K3 w - - 0 1", solution: "c1c8", hint: "Rank 8." },
    { id: 36, name: "Bishop Back", category: "Back Rank", fen: "k7/pp3p1p/8/8/8/8/8/1R2B1K1 w - - 0 1", solution: "b1b8", hint: "Checkmate." },
    { id: 37, name: "Deep Queen", category: "Back Rank", fen: "1k6/ppp5/8/8/8/8/8/Q3K3 w - - 0 1", solution: "a1h8", hint: "Across the board." },
    { id: 38, name: "Pawn Shield", category: "Back Rank", fen: "6k1/ppp5/8/8/8/8/8/R1K5 w - - 0 1", solution: "a1a8", hint: "Check." },
    { id: 39, name: "Rook Slam", category: "Back Rank", fen: "5rk1/5ppp/8/8/8/8/8/4R1K1 w - - 0 1", solution: "e1e8", hint: "Take the row." },
    { id: 40, name: "Final Rank", category: "Back Rank", fen: "k7/ppp5/1R6/8/8/8/8/7K w - - 0 1", solution: "b6b8", hint: "Victory!" },

    // DOUBLE CHECK
    { id: 41, name: "Double Blast", category: "Double Check", fen: "6rk/5Npp/8/8/8/8/8/Q6K w - - 0 1", solution: "a1h1", hint: "Two attackers!" },
    { id: 42, name: "Discovery", category: "Double Check", fen: "k7/8/2N5/8/8/8/8/1R5K w - - 0 1", solution: "b1b8", hint: "Unleash the Rook." },
    { id: 43, name: "Jumping Knight", category: "Double Check", fen: "1nbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 1", solution: "d1h5", hint: "Queen move." },
    { id: 44, name: "Diagonal Trap", category: "Double Check", fen: "k7/8/8/8/8/8/1b6/R3K3 b Q - 0 1", solution: "b2a1", hint: "Check and take." },
    { id: 45, name: "Double Rook", category: "Double Check", fen: "k7/8/1R6/8/8/8/8/1R5K w - - 0 1", solution: "b6a6", hint: "Wall them in." },
    { id: 46, name: "Support Duo", category: "Double Check", fen: "7k/R7/4B3/8/8/8/8/7K w - - 0 1", solution: "a7h7", hint: "Bishop/Rook." },
    { id: 47, name: "Knight Leap", category: "Double Check", fen: "1k6/8/2N5/8/8/8/8/R6K w - - 0 1", solution: "a1a8", hint: "Rook check." },
    { id: 48, name: "Queen Lead", category: "Double Check", fen: "k7/8/1Q6/8/8/8/8/1R5K w - - 0 1", solution: "b6b8", hint: "Queen check." },
    { id: 49, name: "Slide Over", category: "Double Check", fen: "k7/8/1R6/8/8/8/8/Q6K w - - 0 1", solution: "q6a6", hint: "Queen attack." },
    { id: 50, name: "The End", category: "Double Check", fen: "3k4/8/3R4/8/3N4/8/8/3K4 w - - 0 1", solution: "d6d8", hint: "Finish it." },

    // PROMOTION
    { id: 51, name: "Last Step", category: "Promotion", fen: "k7/1P6/K7/8/8/8/8/8 w - - 0 1", solution: "b7b8", hint: "Get a Queen!" },
    { id: 52, name: "Race Top", category: "Promotion", fen: "8/P7/k7/8/8/8/8/K7 w - - 0 1", solution: "a7a8", hint: "Push pawn." },
    { id: 53, name: "Sneaky Black", category: "Promotion", fen: "8/8/8/8/8/k7/1p6/K7 b - - 0 1", solution: "b2b1", hint: "Black promotes." },
    { id: 54, name: "King Escort", category: "Promotion", fen: "k7/P7/1K6/8/8/8/8/8 w - - 0 1", solution: "a7a8", hint: "Escort pawn." },
    { id: 55, name: "Diag Promo", category: "Promotion", fen: "1k6/P7/8/8/8/8/8/K7 w - - 0 1", solution: "a7b8", hint: "Take and promote." },
    { id: 56, name: "The Wall", category: "Promotion", fen: "8/P7/P7/P7/8/k7/8/K7 w - - 0 1", solution: "a7a8", hint: "One makes it." },
    { id: 57, name: "Quick Win", category: "Promotion", fen: "k7/8/P7/8/8/8/8/K7 w - - 0 1", solution: "a6a7", hint: "Almost there." },
    { id: 58, name: "Double Race", category: "Promotion", fen: "8/PP6/k7/8/8/8/8/K7 w - - 0 1", solution: "b7b8", hint: "Which one?" },
    { id: 59, name: "Speed End", category: "Promotion", fen: "k7/P7/8/8/8/8/8/K7 w - - 0 1", solution: "a7a8", hint: "Final sprint." },
    { id: 60, name: "Champion Pawn", category: "Promotion", fen: "k7/P7/2K5/8/8/8/8/8 w - - 0 1", solution: "a7a8", hint: "All 60 done!" }
];

let board = null;
let game = new Chess();
let currentPuzzle = null;
let totalStars = 0;
let timerInterval = null;
let startTime = 0;

function startTimer() {
    clearInterval(timerInterval);
    startTime = Date.now();
    timerInterval = setInterval(() => {
        let elapsed = (Date.now() - startTime) / 1000;
        document.getElementById('timer').innerText = elapsed.toFixed(1);
    }, 100);
}

function onDrop(source, target) {
    let move = game.move({ from: source, to: target, promotion: 'q' });
    if (move === null) return 'snapback';

    if (source + target === currentPuzzle.solution) {
        clearInterval(timerInterval);
        let timeTaken = parseFloat(document.getElementById('timer').innerText);
        let bonus = timeTaken < 7.0 ? 5 : 0;
        totalStars += (10 + bonus);
        document.getElementById('star-count').innerText = totalStars;
        
        if (totalStars >= 500) { $('#cert-modal').fadeIn(); }

        document.getElementById('feedback').innerHTML = `<strong>Tutor Adekunle:</strong> "Excellent move! ${bonus > 0 ? 'That was fast!' : ''}"`;
        $(`[data-id="${currentPuzzle.id}"]`).addClass('solved').append(" ‚úÖ");
    } else {
        document.getElementById('feedback').innerHTML = `<strong>Tutor Adekunle:</strong> "Not quite. Try again."`;
        setTimeout(() => { game.undo(); board.position(game.fen()); }, 500);
    }
}

function loadPuzzle(id) {
    currentPuzzle = puzzles.find(p => p.id === id);
    if(!currentPuzzle) return;
    game.load(currentPuzzle.fen);
    board.position(currentPuzzle.fen);
    document.getElementById('feedback').innerHTML = `<strong>Tutor Adekunle:</strong> "${currentPuzzle.hint}"`;
    $('.puzzle-item').removeClass('active-puzzle');
    $(`[data-id="${id}"]`).addClass('active-puzzle');
    startTimer();
}

function filterPuzzles(cat) {
    const list = document.getElementById('puzzle-list');
    list.innerHTML = '';
    puzzles.filter(p => p.category === cat).forEach(p => {
        const li = document.createElement('li');
        li.className = 'puzzle-item';
        li.innerText = p.name;
        li.setAttribute('data-id', p.id);
        li.onclick = () => loadPuzzle(p.id);
        list.appendChild(li);
    });
    if (list.firstChild) list.firstChild.click();
}

function resetPuzzle() { if(currentPuzzle) loadPuzzle(currentPuzzle.id); }

board = Chessboard('board', {
    draggable: true,
    dropOffBoard: 'snapback',
    position: 'start',
    onDrop: onDrop
});

filterPuzzles('Mate in 1');
</script>
</body>
</html>
